!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).SpRSSViewer=t()}(this,function(){"use strict";var e=function(e,t,r,s,n,i,o,a,l,d){"boolean"!=typeof o&&(l=a,a=o,o=!1);var c,u="function"==typeof r?r.options:r;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),s&&(u._scopeId=s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):t&&(c=o?function(){t.call(this,d(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),c)if(u.functional){var h=u.render;u.render=function(e,t){return c.call(t),h(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return r};const t={props:["dataSource","fetchData","loaded","error"],data:function(){return{}},mounted:function(){this.loading=!0,this.fetchData()},watch:{$route:function(){this.loading=!0,this.fetchData()},dataSource:function(){this.loading=!0,this.fetchData()}}};var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.error?r("div",{staticClass:"sp-error"},[e._v(e._s(e.$i18n(e.error)))]):e.loaded?e._t("default"):r("div",{staticClass:"sp-loading"},[e._m(0)])],2)};r._withStripped=!0;const s={components:{"sp-fetcher":e({render:r,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"line-scale-pulse-out"},[t("div"),this._v(" "),t("div"),this._v(" "),t("div")])}]},void 0,t,void 0,!1,void 0,void 0,void 0)},props:["feedUrl"],data:function(){return{loaded:!1,error:null,headlines:[],copyright:null,currentLocale:["just now",["%ss","%ss"],["%sm","%sm"],["%sh","%sh"],["%sd","%sd"],["%sw","%sw"],["%sm","%sm"],["%sy","%sy"]]}},methods:{linkify:function(e){return anchorme(e)},loadFeed:function(){let e=this.feedUrl?this.feedUrl:"https://www.npr.org/rss/podcast.php?id=510298";var t=this;fetch("https://cors-anywhere.herokuapp.com/"+e).then(function(e){let r=e.headers.get("Content-Type");r&&r.indexOf("8859-1")>0?e.arrayBuffer().then(function(e){try{let r=String.fromCharCode.apply(null,new Uint8Array(e));t.parseRSS(r,t)}catch(e){}}).catch(function(e){t.error=e}):e.text().then(function(e){t.parseRSS(e,t)})}).catch(function(e){t.error=e})},parseRSS:function(e,t){try{var r=(new DOMParser).parseFromString(e,"text/xml"),s=r.getElementsByTagName("title")[0].childNodes[0].nodeValue,n=r.getElementsByTagName("item"),i=[],o=n.length>5?5:n.length;for(let e=0;e<o;e++){let r=t.xmlToJson(n[e]);r.pubDate||(r.pubDate=r["dc:date"]),r.id=e,i.push(r)}var a=r.getElementsByTagName("copyright");a.length>0&&(t.copyright=a[0].textContent),t.headlines=i,t.$emit("update:title",s),t.loaded=!0}catch(e){console.log(e),t.error=e}},timeAgo:function(e){var t=new Date(e).getTime();const r=(new Date).getTime()/1e3-t/1e3;return r>864e3?new Date(e).toLocaleString():r<=5?this.pluralOrSingular("just now",this.currentLocale[0]):r<60?this.pluralOrSingular(r,this.currentLocale[1]):r<3600?this.pluralOrSingular(r/60,this.currentLocale[2]):r<86400?this.pluralOrSingular(r/3600,this.currentLocale[3]):r<604800?this.pluralOrSingular(r/86400,this.currentLocale[4]):r<2592e3?this.pluralOrSingular(r/604800,this.currentLocale[5]):r<31536e3?this.pluralOrSingular(r/2592e3,this.currentLocale[6]):this.pluralOrSingular(r/31536e3,this.currentLocale[7])},pluralOrSingular:function(e,t){if("just now"===e)return t;const r=Math.round(e);return Array.isArray(t)?r>1?t[1].replace(/%s/,r):t[0].replace(/%s/,r):t.replace(/%s/,r)},xmlToJson:function(e){if(e.hasChildNodes()&&1==e.childNodes.length&&("#text"==e.childNodes.item(0).nodeName||"#cdata-section"==e.childNodes.item(0).nodeName))return e.childNodes.item(0).textContent;var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(let s=0;s<e.attributes.length;s++){var r=e.attributes.item(s);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(let r=0;r<e.childNodes.length;r++){var s=e.childNodes.item(r),n=s.nodeName;if(void 0===t[n])t[n]=this.xmlToJson(s);else{if(void 0===t[n].push){var i=t[n];t[n]=[],t[n].push(i)}t[n].push(this.xmlToJson(s))}}return t}}};var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("sp-fetcher",{attrs:{"data-source":e.feedUrl,"fetch-data":e.loadFeed,loaded:e.loaded,error:e.error}},[r("ul",{staticClass:"list-group list-group-flush"},[e._l(e.headlines,function(t){return r("li",{key:t.id,staticClass:"list-group-item"},[r("div",{staticClass:"bm-1"},[r("a",{attrs:{href:t.link,target:"_blank"}},[e._v(e._s(t.title))]),e._v(" "),r("br"),e._v(" "),r("span",{staticClass:"small"},[e._v(e._s(t.pubDate))])]),e._v(" "),r("div",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),t.enclosure?r("div",{staticClass:"text-center py-2 "},[t.enclosure["@attributes"].type&&t.enclosure["@attributes"].type.startsWith("audio")?r("audio",{attrs:{controls:"",src:t.enclosure["@attributes"].url,type:t.enclosure["@attributes"].type}},[e._v("Your browser does not support embedded audio.")]):r("embed",{attrs:{controls:"",src:t.enclosure["@attributes"].url,type:t.enclosure["@attributes"].type}})]):e._e()])}),e._v(" "),e.copyright?r("li",{staticClass:"list-group-item small",domProps:{innerHTML:e._s(e.copyright)}}):e._e()],2)])};n._withStripped=!0;return e({render:n,staticRenderFns:[]},void 0,s,void 0,!1,void 0,void 0,void 0)});
